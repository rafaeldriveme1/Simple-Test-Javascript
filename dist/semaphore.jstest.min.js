"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}();window.total_tests_oks=0,window.total_tests_fails=0,window.total_tests=0;var app={methods:{status:function(){$(".wrapper-test").prepend('\n            <div id="status">\n                <ul>\n                    <li class="total-tests">\n                        Tests total: <span>0</span>\n                    </li>\n                    <li class="success-tests">\n                        Successes: <span>0</span>\n                    </li>\n                    <li class="fails-tests">\n                        Fails: <span>0</span>\n                    </li>\n                </ul>\n            </div>\n            ')},hideAllTest:function(){$(".table-test .test-it").hide()},showAllTest:function(){$(".table-test .test-it").show()},showTestsOks:function(){this.hideAllTest(),$(".table-test .test-it.test-ok").show()},showTestsFails:function(){this.hideAllTest(),$(".table-test .test-it.test-fail").show()}},events:function(){$("body").on("click","a.see-details",function(t){t.preventDefault(),$(".details").hide(),$(this).parents("tr").find(".details").toggle()}),$("body").on("click","li.total-tests",function(t){app.methods.showAllTest()}),$("body").on("click","li.success-tests",function(t){app.methods.showTestsOks()}),$("body").on("click","li.fails-tests",function(t){app.methods.showTestsFails()})},init:function(){$("#status").length||(this.methods.status(),this.events())}},Test=function(){function t(e,s){_classCallCheck(this,t),app.init(),e&&(this.target=$("#app-test"),this.description_test=e,this.test_class=this.rewrite(e),this.insertTest(e),s(this))}return _createClass(t,[{key:"rewrite",value:function(t){if(t)return t.toLowerCase().trim().replace(/[áàãâä]/g,"a").replace(/[éèẽêë]/g,"e").replace(/[íìĩîï]/g,"i").replace(/[óòõôö]/g,"o").replace(/[úùũûü]/g,"u").replace(/ç/g,"c").replace(/(\ |_)+/," ").replace(/(^-+|-+$)/,"").replace(/[^a-z0-9]+/g,"-")}},{key:"testHtmlTable",value:function(){if(this.description_test)return'\n        <table class="table-test '+this.test_class+'" style="width:100%">\n            <tbody>\n                <tr class="description-test">\n                <th colspan="3">'+this.description_test+"</th>\n                </tr>\n            </tbody>  \n        </table>"}},{key:"testLineHtmlTable",value:function(t,e,s){if(t.description_it&&t&&e){var i="ok"==e?'<i class="fa fa-check-circle" aria-hidden="true"></i>':'<i class="fa fa-times-circle" aria-hidden="true"></i>';return s=s?JSON.stringify(s):"Not details",'\n        <tr class="test-it test-'+e+'">\n            <td colspan="3">\n            <h3>'+i+" "+t.description_it+'</h3>\n            <div class="info"><b>output:</b> '+t.output+" - <b>expect:</b> "+t.expect+' - <b><a href="" class="see-details">see details</a></b></div>\n            <div class="details">'+s+"</div>\n            </td>\n        </tr>"}}},{key:"insertTest",value:function(t){t&&this.appendContentTest(this.testHtmlTable(t))}},{key:"appendContentTest",value:function(t){this.target.prepend(t)}},{key:"appendContentItTest",value:function(t,e){$("."+t.test_class+" tbody").append(e)}},{key:"countTest",value:function(t,e){t&&$(t).find("span").text(e)}},{key:"it",value:function(t,e){t&&(this.description_it=t,window.total_tests++,this.countTest(".total-tests",window.total_tests),e({description_it:this.description_it}))}},{key:"fail",value:function(t,e){if(t||e){var s=e.details||"";this.appendContentItTest(t,this.testLineHtmlTable(e,"fail",s)),window.total_tests_fails++,this.countTest(".fails-tests",window.total_tests_fails)}}},{key:"ok",value:function(t,e){if(t||e){var s=e.details||"";this.appendContentItTest(t,this.testLineHtmlTable(e,"ok",s)),window.total_tests_oks++,this.countTest(".success-tests",window.total_tests_oks)}}}]),t}();"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=Test);